import pyrealsense2 as rs
import numpy as np
import cv2

pipeline = rs.pipeline()
config = rs.config()

config.enable_stream(rs.stream.infrared, 1, 640, 480, rs.format.y8, 30)  
config.enable_stream(rs.stream.infrared, 2, 640, 480, rs.format.y8, 30)  

pipeline.start(config)

try:
    while True:
        frames = pipeline.wait_for_frames()
        ir_left = frames.get_infrared_frame(1) 
        ir_right = frames.get_infrared_frame(2)  

        if not ir_left or not ir_right:
            continue

        img_left = np.asanyarray(ir_left.get_data())
        img_right = np.asanyarray(ir_right.get_data())

        
        cv2.imshow("Left IR", img_left)
        cv2.imshow("Right IR", img_right)

        if cv2.waitKey(1) & 0xFF == ord('q'):
            break
finally:
    pipeline.stop()
    cv2.destroyAllWindows()